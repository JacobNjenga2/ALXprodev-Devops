#!/bin/bash

# API Request Automation Script
# Makes a request to the Pokémon API for Pikachu data
# Saves response to data.json or logs errors to errors.txt

# API endpoint for Pikachu (Pokémon ID: 25)
API_URL="https://pokeapi.co/api/v2/pokemon/25"

# Output files
DATA_FILE="data.json"
ERROR_FILE="errors.txt"

echo "Making API request to Pokémon API for Pikachu data..."

# Make the API request and handle the response
if curl -s -f "$API_URL" > "$DATA_FILE" 2>/dev/null; then
    echo "Success! Pikachu data saved to $DATA_FILE"
    echo "Response status: $(curl -s -o /dev/null -w "%{http_code}" "$API_URL")"
else
    echo "Error: Failed to retrieve data from Pokémon API" | tee "$ERROR_FILE"
    echo "Timestamp: $(date)" >> "$ERROR_FILE"
    echo "API URL: $API_URL" >> "$ERROR_FILE"
    echo "HTTP Status: $(curl -s -o /dev/null -w "%{http_code}" "$API_URL" 2>/dev/null || echo "Connection failed")" >> "$ERROR_FILE"
    echo "Error details saved to $ERROR_FILE"
    exit 1
fi 